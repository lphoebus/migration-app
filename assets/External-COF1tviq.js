import{aF as h,bl as f,aO as m,bm as y,bn as b}from"./index-BEoKfti0.js";class d{constructor(t,s,r){this.assetName=t,this.assetMimeType=s,this.parts=r}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&m(this.parts,t.parts,(s,r)=>s.equals(r))}isOnService(t){return this.parts.every(s=>s.isOnService(t))}makeHash(){let t="";for(const s of this.parts)t+=s.partHash;return t}async toBlob(t){const{parts:s}=this;if(s.length===1)return s[0].toBlob(t);const r=await Promise.all(s.map(n=>n.toBlob(t)));return f(t),new Blob(r)}}class H{constructor(t,s){this.partUrl=t,this.partHash=s}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(t){const{data:s}=await h(this.partUrl,{responseType:"blob"});return f(t),s}}function T(e){return v(e==null?void 0:e.source)}const u=/^(model\/gltf\+json)|(model\/gltf-binary)$/,c=/\.(gltf|glb)/i;function v(e){switch(e==null?void 0:e.type){case"client":return Array.isArray(e.files)?e.files.some(i):i(e.files);case"service":return e.assets.some(i);case"loadable":return!0;default:return!1}}function i(e){if(e instanceof File){const{type:t,name:s}=e;return u.test(t)||c.test(s)}return u.test(e.assetMimeType)||c.test(e.assetName)}function $(e,t){if(!e)return!1;const{source:s}=e;return g(s,t)}function w(e,t){if(e===t)return!0;const{source:s}=e,{source:r}=t;if(s===r)return!0;if(s.type==="service"&&r.type==="service"){if(s.assets.length!==r.assets.length)return!1;const n=(a,l)=>a.assetName<l.assetName?-1:a.assetName>l.assetName?1:0,o=[...s.assets].sort(n),p=[...r.assets].sort(n);for(let a=0;a<o.length;++a)if(!o[a].equals(p[a]))return!1;return!0}return!1}function g(e,t){return e.type==="service"&&e.assets.every(s=>s.isOnService(t))}function B(e,t){return e instanceof File?y(e,t):b(e.assetMimeType,e.assetName,t)}function M(e){switch(e.type){case"client":return Array.isArray(e.files)?e.files:[e.files];case"service":return e.assets;case"loadable":return}}function O(e){return!!e.original}export{M as b,$ as f,d as i,w as m,H as n,T as o,O as v,B as y};
